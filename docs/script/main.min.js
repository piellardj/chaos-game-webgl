!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.gl=n,t.initGL=function(e){function r(e){Demopage.setErrorMessage("webgl-support",e)}var i=Canvas.getCanvas();if(t.gl=n=i.getContext("webgl",e),null==n){if(t.gl=n=i.getContext("experimental-webgl",e),null==n)return r("Your browser or device does not seem to support WebGL."),!1;r("Your browser or device only supports experimental WebGL.\nThe simulation may not run as expected.")}return n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.BLEND),n.clearColor(0,0,0,1),!0},t.adjustSize=function(e){void 0===e&&(e=!1);var t=e?window.devicePixelRatio:1,r=Math.floor(n.canvas.clientWidth*t),i=Math.floor(n.canvas.clientHeight*t);n.canvas.width===r&&n.canvas.height===i||(n.canvas.width=r,n.canvas.height=i)}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(12)),o=n(r(13));function a(e,t,r){return Math.min(r,Math.max(t,e))}var s={AUTORUN:"autorun-checkbox-id",RESET:"reset-button-id",SPEED:"speed-range-id",QUALITY:"quality-range-id",COLORS:"colors-checkbox-id",MODE:"mode",PRESETS_FIXED:"presets-fixed-picker-id",PRESETS_MOVEMENT:"presets-movement-picker-id",POLES:"poles-range-id",DISTANCE:"distance-range-id",DISTANCE_FROM:"distance-from-range-id",DISTANCE_TO:"distance-to-range-id",FORBID_REPEAT:"forbid-repeat-checkbox-id",RESTRICTIONS:"restrictions-picker-id",RESULT_SIZE:"result-dimensions",DOWNLOAD:"result-download-id"};function u(e){for(var t=0,r=e;t<r.length;t++){(0,r[t])()}}var c={clear:[],download:[],preview:[],resetView:[]};FileControl.addDownloadObserver(s.DOWNLOAD,function(){for(var e=+Tabs.getValues(s.RESULT_SIZE)[0],t=0,r=c.download;t<r.length;t++){(0,r[t])(e)}}),Button.addObserver(s.RESET,function(){return u(c.clear)}),Canvas.Observers.mouseDrag.push(function(){return u(c.clear)}),Canvas.Observers.mouseDrag.push(function(){return u(c.preview)});var l=function(){function e(){}return Object.defineProperty(e,"scale",{get:function(){return d},set:function(e){d=a(e,p,v),u(c.clear)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"autorun",{get:function(){return h},set:function(e){h=e,Checkbox.setChecked(s.AUTORUN,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"speed",{get:function(){return _},set:function(e){_=e,Range.setValue(s.SPEED,_)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"quality",{get:function(){return E},set:function(e){E=e,Range.setValue(s.QUALITY,E)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"colors",{get:function(){return O},set:function(e){O=e,Checkbox.setChecked(s.COLORS,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"mode",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(e,"modeChangeObservers",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(e,"presetFixed",{set:function(e){Picker.setValue(s.PRESETS_FIXED,""+e),M===N.FIXED&&m(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"presetMovement",{set:function(e){Picker.setValue(s.PRESETS_MOVEMENT,""+e),M===N.MOVEMENT&&P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"poles",{get:function(){return y},set:function(e){y=e,Range.setValue(s.POLES,y),u(c.clear)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"distance",{get:function(){return A},set:function(e){A=e,Range.setValue(s.DISTANCE,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"distanceFrom",{get:function(){return Math.min(S,C)},set:function(e){S=e,Range.setValue(s.DISTANCE_FROM,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"distanceTo",{get:function(){return Math.max(S,C)},set:function(e){C=e,Range.setValue(s.DISTANCE_TO,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"restriction",{get:function(){return F},set:function(e){F=e,Picker.setValue(s.RESTRICTIONS,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"downloadObservers",{get:function(){return c.download},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return c.clear},enumerable:!0,configurable:!0}),Object.defineProperty(e,"previewObservers",{get:function(){return c.preview},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resetViewObservers",{get:function(){return c.resetView},enumerable:!0,configurable:!0}),e}();function f(){u(c.clear),l.autorun=!0}t.Parameters=l;var d=1,p=.05,v=4;Canvas.Observers.mouseWheel.push(function(e,t){var r=a(d*(1+.2*e),p,v);r!==d&&(d=r,f())});var h=Checkbox.isChecked(s.AUTORUN);Checkbox.addObserver(s.AUTORUN,function(e){h=e});var _=Range.getValue(s.SPEED);Range.addObserver(s.SPEED,function(e){_=e});var E=Range.getValue(s.QUALITY);Range.addObserver(s.QUALITY,function(e){E=e,f()});var O=Checkbox.isChecked(s.COLORS);Checkbox.addObserver(s.COLORS,function(e){O=e,f()});var b=-1;function g(){b>=0&&(b=-1,Picker.setValue(s.PRESETS_FIXED,null))}function m(e){if(e>=0){b=e;var t=i.getPreset(e);l.poles=t.poles,l.distance=t.distance,l.restriction=t.restriction,l.scale=t.scale,f(),u(c.resetView)}}Picker.addObserver(s.PRESETS_FIXED,function(e){null===e?b=-1:m(+e)}),m(+Picker.getValue(s.PRESETS_FIXED));var R=-1;function T(){R>=0&&(R=-1,Picker.setValue(s.PRESETS_MOVEMENT,null))}function P(e){if(e>=0){R=e;var t=o.getPreset(e);l.poles=t.poles,l.distanceFrom=t.distanceFrom,l.distanceTo=t.distanceTo,l.restriction=t.restriction,l.scale=t.scale,f(),u(c.resetView)}}Picker.addObserver(s.PRESETS_MOVEMENT,function(e){null===e?R=-1:P(+e)}),P(+Picker.getValue(s.PRESETS_MOVEMENT));var y=Range.getValue(s.POLES);Range.addObserver(s.POLES,function(e){y=e,g(),T(),f(),u(c.resetView)});var A=Range.getValue(s.DISTANCE);Range.addObserver(s.DISTANCE,function(e){A=e,g(),f()});var S=Range.getValue(s.DISTANCE_FROM);Range.addObserver(s.DISTANCE_FROM,function(e){S=e,T(),u(c.preview),f()});var N,C=Range.getValue(s.DISTANCE_TO);Range.addObserver(s.DISTANCE_TO,function(e){C=e,T(),u(c.preview),f()}),function(e){e.FIXED="fixed",e.MOVEMENT="movement"}(N||(N={})),t.Mode=N;var M,I=[];function w(e){if(e!==M){var t,r=(M=e)===N.FIXED;if(r)(t=Picker.getValue(s.PRESETS_FIXED))&&m(+t);else(t=Picker.getValue(s.PRESETS_MOVEMENT))&&P(+t);Controls.setVisibility(s.PRESETS_FIXED,r),Controls.setVisibility(s.DISTANCE,r),Controls.setVisibility(s.PRESETS_MOVEMENT,!r),Controls.setVisibility(s.DISTANCE_FROM,!r),Controls.setVisibility(s.DISTANCE_TO,!r);for(var n=0,i=I;n<i.length;n++){(0,i[n])(e)}f()}}w(Tabs.getValues(s.MODE)[0]),Tabs.addObserver(s.MODE,function(e){return w(e[0])});var F=Picker.getValue(s.RESTRICTIONS);Picker.addObserver(s.RESTRICTIONS,function(e){F=e,g(),T(),f()})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._gl=e}return e.prototype.gl=function(){return this._gl},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(1);!function(e){e.NONE="none",e.NO_REPEAT="no-repeat",e.NO_DOUBLE_REPEAT="no-double-repeat",e.NO_NEIGHBOUR="no-neighbour",e.NO_NEIGHBOUR_AFTER_REPEAT="no-neighbour-after-repeat",e.NO_RIGHT_NEIGHBOUR="no-right-neighbour"}(n||(n={})),t.Restriction=n,t.getChooseFunction=function(){switch(i.Parameters.restriction){case n.NONE:return u;case n.NO_REPEAT:return c;case n.NO_DOUBLE_REPEAT:return l;case n.NO_NEIGHBOUR:return f;case n.NO_NEIGHBOUR_AFTER_REPEAT:return d;case n.NO_RIGHT_NEIGHBOUR:return p;default:return null}};var o=-1,a=[-1,-1],s=0;function u(e){return Math.floor(e*Math.random())}function c(e){var t;do{t=u(e)}while(t===o);return o=t,t}function l(e){var t,r=a[0]===a[1];do{t=u(e)}while(r&&a[0]===t);return a[s=(s+1)%2]=t,t}function f(e){var t;do{t=u(e)}while((t+1)%e===o||(t+e-1)%e===o);return o=t,t}function d(e){var t,r=a[0]===a[1];do{t=u(e)}while(r&&((t+1)%e===a[0]||(t+e-1)%e===a[0]));return a[s=(s+1)%2]=t,t}function p(e){var t;do{t=u(e)}while((t+1)%e===o);return o=t,t}t.clearHistory=function(){o=-1,a=[-1,-1],s=0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){this.left=e,this.lower=t,this.width=r,this.height=n}return e.setFullCanvas=function(e){e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)},e.prototype.set=function(e){e.viewport(this.lower,this.left,this.width,this.height)},e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0)),a=r(0),s=i(r(4)),u=i(r(6)),c=i(r(14)),l=r(1);!function(){o.initGL({alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!0})&&(a.gl.enable(a.gl.BLEND),a.gl.clearColor(0,0,0,1),a.gl.blendEquation(a.gl.FUNC_ADD),a.gl.blendFunc(a.gl.ONE,a.gl.ONE)),Canvas.showLoader(!0),l.Parameters.quality=.6,l.Parameters.speed=17,l.Parameters.autorun=!0,l.Parameters.colors=!1,l.Parameters.presetFixed=15,l.Parameters.presetMovement=0;var e=!0,t=!0,r=!1,n=!1;!function(){l.Parameters.clearObservers.push(function(){t=!0,l.Parameters.mode===l.Mode.MOVEMENT&&(f=l.Parameters.distanceFrom)}),l.Parameters.previewObservers.push(function(){return r=!0}),Canvas.Observers.canvasResize.push(function(){return e=!0});var o=function(e){return f=e===l.Mode.FIXED?l.Parameters.distance:l.Parameters.distanceFrom};o(l.Parameters.mode),l.Parameters.modeChangeObservers.push(o),l.Parameters.downloadObservers.push(function(t){n=!0,c.default(d,t,i),n=!1,e=!0})}();var i,f,d=new u.default;function p(e){i=e,Canvas.setIndicatorText("points-drawn",i.toLocaleString())}p(0);var v=!1,h=!0;requestAnimationFrame(function u(){if(!n){if(e&&(o.adjustSize(),s.default.setFullCanvas(a.gl),e=!1,t=!0),(t=t||v&&l.Parameters.autorun)&&(a.gl.clear(a.gl.COLOR_BUFFER_BIT),p(0),t=!1,v=!1),r){var c=Math.pow(2,17);d.draw(c,f,0),p(c),r=!1,v=!0}l.Parameters.autorun&&(l.Parameters.mode===l.Mode.MOVEMENT?(f+=.002)>l.Parameters.distanceTo&&(f=l.Parameters.distanceFrom):f=l.Parameters.distance,c=Math.pow(2,l.Parameters.speed-1),p(i+c),d.draw(c,f,l.Parameters.quality),h&&(h=!1,Canvas.showLoader(!1)))}requestAnimationFrame(u)})}()},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),u=o(r(2)),c=a(r(7)),l=o(r(10)),f=o(r(11)),d=r(1),p=a(r(3)),v=function(e){function t(){var t=e.call(this,s.gl)||this,r=new Float32Array(2);return t._pointsVBO=new l.default(s.gl,r,2,s.gl.FLOAT,!1),t._viewCenter=[0,0],Canvas.Observers.mouseDrag.push(function(e,r){var n=Canvas.getSize(),i=n[0]/n[1];t._viewCenter[0]-=2*e*d.Parameters.scale*i,t._viewCenter[1]+=2*r*d.Parameters.scale}),d.Parameters.resetViewObservers.push(function(){t._viewCenter=[0,0]}),t.recomputePolesPositions(d.Parameters.poles),t._shader=null,c.buildShader({fragmentFilename:"points.frag",vertexFilename:"points.vert",injected:{}},function(e){null!==e&&(t._shader=e)}),t}return i(t,e),t.prototype.freeGLResources=function(){this._pointsVBO&&(this._pointsVBO.freeGLResources(),this._pointsVBO=null),this._shader&&(this._shader.freeGLResources(),this._shader=null)},t.prototype.draw=function(e,t,r){var n=this._shader;if(n){var i=this.computeXPoints(e,t);this._pointsVBO.setData(i.data),n.a.aCoords.VBO=this._pointsVBO,n.use(),n.bindAttributes();for(var o=1/(1+254*r),a=0,u=i.sets;a<u.length;a++){var c=u[a];n.u.uColor.value=[c.color[0]*o,c.color[1]*o,c.color[2]*o,1],n.bindUniforms(),s.gl.drawArrays(s.gl.POINTS,c.from,c.size)}}},t.prototype.recomputePolesPositions=function(e){for(var t,r=this,n=Canvas.getSize(),i=n[0]/n[1],o=new Float32Array(2*e),a=-2*Math.PI/e,s=Math.PI/2+(e+1)%2*a/2,u=.5*(Math.sin(s)+Math.sin(s+Math.floor(e/2)*a)),c=0;c<e;++c){var l=s+c*a,f=[Math.cos(l),Math.sin(l)-u],p=[((t=f)[0]-r._viewCenter[0])/(d.Parameters.scale*i),(t[1]-r._viewCenter[1])/d.Parameters.scale];o[2*c+0]=p[0],o[2*c+1]=p[1]}return o},t.prototype.computeXPoints=function(e,t){var r=d.Parameters.poles;p.clearHistory();var n=p.getChooseFunction(),i=this.recomputePolesPositions(r),o=[2*Math.random()-1,2*Math.random()-1];function a(){var e=n(r);return o[0]+=t*(i[2*e+0]-o[0]),o[1]+=t*(i[2*e+1]-o[1]),e}for(var s=0;s<500;++s)a();var u={data:new Float32Array(2*e),sets:[]};if(d.Parameters.colors){var c=Math.floor(e/r);for(s=0;s<r;++s)u.sets.push({color:f.default(s/r),from:s*c,size:0});for(var l=0;l<e;++l){var v=a();if(u.sets[v].size+1<c){var h=2*(u.sets[v].from+u.sets[v].size);u.data[h+0]=o[0],u.data[h+1]=o[1],u.sets[v].size++}}}else{u.sets.push({color:[1,1,1],from:0,size:e});for(l=0;l<e;++l){a();var _=2*l;u.data[_+0]=o[0],u.data[_+1]=o[1]}}return u},t}(u.default);t.default=v},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=n(r(8)),s=i(r(9)),u={};function c(e,t){var r=2,n=0;function i(i){function u(t){return t.replace(/#INJECT\((.*)\)/gm,function(t,r){return e.injected[r]?e.injected[r]:t})}if(i||n++,0===--r){var c=null;if(0===n){var l=s.getSource(e.vertexFilename),f=s.getSource(e.fragmentFilename),d=u(l),p=u(f);c=new a.default(o.gl,d,p)}t(c)}}s.loadSource(e.vertexFilename,i),s.loadSource(e.fragmentFilename,i)}t.getShader=function(e){return u[e].shader},t.buildShader=c,t.registerShader=function(e,t,r){function n(e){for(var t=0,r=e.callbacks;t<r.length;t++)(0,r[t])(!e.failed,e.shader);e.callbacks=[]}if(void 0===u[e]){u[e]={callbacks:[r],failed:!1,infos:t,pending:!0,shader:null};var i=u[e];c(t,function(e){i.pending=!1,i.failed=null===e,i.shader=e,n(i)})}else{var o=u[e];!0===o.pending?o.callbacks.push(r):n(o)}},t.deleteShader=function(e){u[e]&&(u[e].shader&&u[e].shader.freeGLResources(),delete u[e])}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(2));function s(e,t,r){alert("NOT IMPLEMENTED YET")}var u={35664:{str:"FLOAT_VEC2",binder:function(e,t,r){e.uniform2fv(t,r)}},35665:{str:"FLOAT_VEC3",binder:function(e,t,r){e.uniform3fv(t,r)}},35666:{str:"FLOAT_VEC4",binder:function(e,t,r){e.uniform4fv(t,r)}},35667:{str:"INT_VEC2",binder:function(e,t,r){e.uniform2iv(t,r)}},35668:{str:"INT_VEC3",binder:function(e,t,r){e.uniform3iv(t,r)}},35669:{str:"INT_VEC4",binder:function(e,t,r){e.uniform4iv(t,r)}},35670:{str:"BOOL",binder:function(e,t,r){e.uniform1i(t,+r)}},35671:{str:"BOOL_VEC2",binder:function(e,t,r){e.uniform2iv(t,r)}},35672:{str:"BOOL_VEC3",binder:function(e,t,r){e.uniform3iv(t,r)}},35673:{str:"BOOL_VEC4",binder:function(e,t,r){e.uniform4iv(t,r)}},35674:{str:"FLOAT_MAT2",binder:function(e,t,r){e.uniformMatrix2fv(t,!1,r)}},35675:{str:"FLOAT_MAT3",binder:function(e,t,r){e.uniformMatrix3fv(t,!1,r)}},35676:{str:"FLOAT_MAT4",binder:function(e,t,r){e.uniformMatrix4fv(t,!1,r)}},35678:{str:"SAMPLER_2D",binder:function(e,t,r,n){e.uniform1i(t,r),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(e.TEXTURE_2D,n)}},35680:{str:"SAMPLER_CUBE",binder:function(e,t,r,n){e.uniform1i(t,r),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(e.TEXTURE_CUBE_MAP,n)}},5120:{str:"BYTE",binder:s},5121:{str:"UNSIGNED_BYTE",binder:s},5122:{str:"SHORT",binder:s},5123:{str:"UNSIGNED_SHORT",binder:s},5124:{str:"INT",binder:function(e,t,r){Array.isArray(r),e.uniform1iv(t,r)}},5125:{str:"UNSIGNED_INT",binder:s},5126:{str:"FLOAT",binder:function(e,t,r){Array.isArray(r)?e.uniform1fv(t,r):e.uniform1f(t,r)}}},c=function(e){function t(t,r,n){var i=this;function o(e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.error(t.getShaderInfoLog(n)),t.deleteShader(n),null)}(i=e.call(this,t)||this).id=null,i.uCount=0,i.aCount=0;var a=o(t.VERTEX_SHADER,r),s=o(t.FRAGMENT_SHADER,n),u=t.createProgram();return t.attachShader(u,a),t.attachShader(u,s),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)?(i.id=u,i.introspection()):(console.error(t.getProgramInfoLog(u)),t.deleteProgram(u)),i}return i(t,e),t.prototype.freeGLResources=function(){e.prototype.gl.call(this).deleteProgram(this.id),this.id=null},t.prototype.use=function(){e.prototype.gl.call(this).useProgram(this.id)},t.prototype.bindUniforms=function(){var t=this,r=e.prototype.gl.call(this),n=0;Object.keys(this.u).forEach(function(e){var i=t.u[e];if(null!==i.value)if(35678===i.type||35680===i.type){var o=n;u[i.type].binder(r,i.loc,o,i.value),n++}else u[i.type].binder(r,i.loc,i.value)})},t.prototype.bindAttributes=function(){var e=this;Object.keys(this.a).forEach(function(t){var r=e.a[t];null!==r.VBO&&r.VBO.bind(r.loc)})},t.prototype.bindUniformsAndAttributes=function(){this.bindUniforms(),this.bindAttributes()},t.prototype.introspection=function(){var t=e.prototype.gl.call(this);this.uCount=t.getProgramParameter(this.id,t.ACTIVE_UNIFORMS),this.u=[];for(var r=0;r<this.uCount;++r){var n=t.getActiveUniform(this.id,r),i=n.name;this.u[i]={loc:t.getUniformLocation(this.id,i),size:n.size,type:n.type,value:null}}this.aCount=t.getProgramParameter(this.id,t.ACTIVE_ATTRIBUTES),this.a=[];for(r=0;r<this.aCount;++r){var o=t.getActiveAttrib(this.id,r),a=o.name;this.a[a]={VBO:null,loc:t.getAttribLocation(this.id,a),size:o.size,type:o.type}}},t}(a.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.loadSource=function(e,t){function r(e){for(var t=0,r=e.callbacks;t<r.length;t++)(0,r[t])(!e.failed);e.callbacks=[]}if(void 0===n[e]){n[e]={callbacks:[t],failed:!1,pending:!0,text:null};var i=n[e],o=new XMLHttpRequest;o.open("GET","./shaders/"+e,!0),o.onload=function(){4===o.readyState&&(i.pending=!1,200===o.status?(i.text=o.responseText,i.failed=!1):(console.error("Cannot load '"+e+"' shader source: "+o.statusText),i.failed=!0),r(i))},o.onerror=function(){console.error("Cannot load '"+e+"' shader source: "+o.statusText),i.pending=!1,i.failed=!0,r(i)},o.send(null)}else{var a=n[e];!0===a.pending?a.callbacks.push(t):(a.callbacks=[t],r(a))}},t.getSource=function(e){return n[e].text}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=o(r(2));!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.STATIC=1]="STATIC"}(a||(a={}));var u=function(e){function t(t,r,n,i,o){void 0===o&&(o=!0);var s=e.call(this,t)||this;return s.id=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s.id),o?t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW):t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),s.size=n,s.type=i,s.normalize=!1,s.stride=0,s.offset=0,s.usage=o?a.STATIC:a.DYNAMIC,s}return i(t,e),t.createQuad=function(e,r,n,i,o){return new t(e,new Float32Array([r,n,i,n,r,o,i,o]),2,e.FLOAT,!0)},t.prototype.freeGLResources=function(){this.gl().deleteBuffer(this.id),this.id=null},t.prototype.bind=function(t){var r=e.prototype.gl.call(this);r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,this.id),r.vertexAttribPointer(t,this.size,this.type,this.normalize,this.stride,this.offset)},t.prototype.setData=function(t){var r=e.prototype.gl.call(this);r.bindBuffer(r.ARRAY_BUFFER,this.id),this.usage===a.STATIC?r.bufferData(r.ARRAY_BUFFER,t,r.STATIC_DRAW):r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null)},t}(s.default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0,r=0,n=0;return(e=e%1*6)<1?(t=1,r=e):e<2?(t=2-e,r=1):e<3?(r=1,n=e-2):e<4?(r=4-e,n=1):e<5?(t=e-4,n=1):e<6&&(t=1,n=6-e),[t,r,n]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=[];i[0]={poles:3,distance:.5,restriction:n.Restriction.NONE,scale:1},i[1]={poles:6,distance:.5,restriction:n.Restriction.NONE,scale:.75},i[2]={poles:3,distance:1.5,restriction:n.Restriction.NONE,scale:3},i[3]={poles:5,distance:.5,restriction:n.Restriction.NONE,scale:1},i[4]={poles:4,distance:.5,restriction:n.Restriction.NO_REPEAT,scale:.8},i[5]={poles:4,distance:.5,restriction:n.Restriction.NO_NEIGHBOUR_AFTER_REPEAT,scale:.8},i[6]={poles:4,distance:1.5,restriction:n.Restriction.NO_REPEAT,scale:2.5},i[7]={poles:6,distance:.57,restriction:n.Restriction.NONE,scale:1.2},i[8]={poles:6,distance:1.5,restriction:n.Restriction.NO_REPEAT,scale:2},i[9]={poles:4,distance:.4,restriction:n.Restriction.NO_REPEAT,scale:.8},i[10]={poles:4,distance:1.618,restriction:n.Restriction.NO_REPEAT,scale:3},i[11]={poles:5,distance:1.618,restriction:n.Restriction.NO_REPEAT,scale:4},i[12]={poles:3,distance:1.618,restriction:n.Restriction.NO_REPEAT,scale:4},i[13]={poles:4,distance:1.618,restriction:n.Restriction.NONE,scale:4},i[14]={poles:6,distance:.667,restriction:n.Restriction.NONE,scale:.65},i[15]={poles:5,distance:1.5,restriction:n.Restriction.NO_NEIGHBOUR,scale:3},i[16]={poles:7,distance:1.445,restriction:n.Restriction.NO_DOUBLE_REPEAT,scale:1.5},i[17]={poles:4,distance:.5,restriction:n.Restriction.NO_DOUBLE_REPEAT,scale:.75},i[18]={poles:3,distance:.386,restriction:n.Restriction.NO_RIGHT_NEIGHBOUR,scale:1},i[19]={poles:3,distance:1.755,restriction:n.Restriction.NO_REPEAT,scale:4},i[20]={poles:3,distance:1.647,restriction:n.Restriction.NO_RIGHT_NEIGHBOUR,scale:1},t.getPreset=function(e){return i[e]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=[];i[0]={poles:3,distanceFrom:1,distanceTo:1.6,restriction:n.Restriction.NONE,scale:3},i[1]={poles:5,distanceFrom:.5,distanceTo:1,restriction:n.Restriction.NONE,scale:1},i[2]={poles:6,distanceFrom:1,distanceTo:1.5,restriction:n.Restriction.NO_REPEAT,scale:2.5},i[3]={poles:3,distanceFrom:1,distanceTo:1.7,restriction:n.Restriction.NO_RIGHT_NEIGHBOUR,scale:3},i[4]={poles:5,distanceFrom:.265,distanceTo:1.65,restriction:n.Restriction.NO_NEIGHBOUR,scale:3},t.getPreset=function(e){return i[e]}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0)),a=r(0),s=i(r(4)),u=r(1);t.default=function(e,t,r){var n=Canvas.getCanvas(),i=Canvas.getSize()[1];function c(e){return e*Math.pow(t/i,2)}function l(){n.style.position="",n.style.width="",n.style.height="",Canvas.showLoader(!1),Canvas.setLoaderText("")}Canvas.showLoader(!0),n.style.position="absolute",n.style.width=t+"px",n.style.height=t+"px",n.width=t,n.height=t,o.adjustSize(),s.default.setFullCanvas(a.gl),a.gl.clear(a.gl.COLOR_BUFFER_BIT);var f=c(r),d=0;if(u.Parameters.mode===u.Mode.FIXED)for(var p=524288,v=u.Parameters.distance;d<f;)d+=p,e.draw(p,v,u.Parameters.quality);else for(p=c(Math.pow(2,u.Parameters.speed-1)),v=u.Parameters.distanceFrom;d<f;)(v+=.002)>u.Parameters.distanceTo&&(v=u.Parameters.distanceFrom),d+=p,e.draw(p,v,u.Parameters.quality);if(n.msToBlob){var h=n.msToBlob();window.navigator.msSaveBlob(h,"chaos-game.png"),l()}else n.toBlob(function(e){var t=document.createElement("a");t.download="chaos-game.png",t.href=URL.createObjectURL(e),t.click(),l()})}}]);