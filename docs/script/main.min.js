!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=t.Parameters=t.Mode=void 0;var a,s=o(n(15)),u=o(n(16));function c(e,t,n){return Math.min(n,Math.max(t,e))}n(2),function(e){e.DARK="dark",e.LIGHT="light"}(a||(a={})),t.Theme=a;var l="mode",f="presets-fixed-picker-id",d="presets-movement-picker-id",p="poles-range-id",h="distance-range-id",_="distance-from-range-id",g="distance-to-range-id",P="rotation-range-id",b="restrictions-picker-id",v="intensity-range-id",O="quality-range-id",y="theme",m="colors-checkbox-id",R="reset-button-id",E="result-dimensions",T="result-download-id";function w(e){for(var t=0,n=e;t<n.length;t++){(0,n[t])()}}var A,N=[],M=[],j=[],C=[];!function(e){e.FIXED="fixed",e.MOVEMENT="movement"}(A||(A={})),t.Mode=A,Page.FileControl.addDownloadObserver(T,(function(){for(var e=+Page.Tabs.getValues(E)[0],t=0,n=M;t<n.length;t++){(0,n[t])(e)}})),Page.Button.addObserver(R,(function(){return w(N)})),Page.Canvas.Observers.mouseDrag.push((function(){return w(N)}));var S=0;function D(){var e=G*(z+.1),t=ne===A.MOVEMENT||e<S;S=e,t&&V()}var F=0;function B(){var e=Page.Canvas.getSize();F=I.computeSizeFactor(e)}var I=function(){function e(){}return Object.defineProperty(e,"scale",{get:function(){return U},set:function(e){U=c(e,L,x),w(N)},enumerable:!1,configurable:!0}),e.computeSizeFactor=function(e){return Math.min(e[0],e[1])/U},Object.defineProperty(e,"sizeFactor",{get:function(){return F},enumerable:!1,configurable:!0}),Object.defineProperty(e,"nbPointsNeeded",{get:function(){return S},enumerable:!1,configurable:!0}),Object.defineProperty(e,"intensity",{get:function(){return G},set:function(e){Page.Range.setValue(v,e),G=Page.Range.getValue(v),D()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"quality",{get:function(){return z},set:function(e){z=e,Page.Range.setValue(O,z)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"theme",{get:function(){return k},enumerable:!1,configurable:!0}),Object.defineProperty(e,"colors",{get:function(){return Y},set:function(e){Y=e,Page.Checkbox.setChecked(m,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"mode",{get:function(){return ne},enumerable:!1,configurable:!0}),Object.defineProperty(e,"modeChangeObservers",{get:function(){return j},enumerable:!1,configurable:!0}),Object.defineProperty(e,"presetFixed",{set:function(e){Page.Picker.setValue(f,""+e),ne===A.FIXED&&W(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"presetMovement",{set:function(e){Page.Picker.setValue(d,""+e),ne===A.MOVEMENT&&Q(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"poles",{get:function(){return Z},set:function(e){Z=e,Page.Range.setValue(p,Z),w(N)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"distance",{get:function(){return $},set:function(e){$=e,Page.Range.setValue(h,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"distanceFrom",{get:function(){return Math.min(ee,te)},set:function(e){ee=e,Page.Range.setValue(_,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"distanceTo",{get:function(){return Math.max(ee,te)},set:function(e){te=e,Page.Range.setValue(g,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"rotation",{get:function(){return re},set:function(e){re=e,Page.Range.setValue(P,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"restriction",{get:function(){return oe},set:function(e){oe=e,Page.Picker.setValue(b,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"downloadObservers",{get:function(){return M},enumerable:!1,configurable:!0}),Object.defineProperty(e,"clearObservers",{get:function(){return N},enumerable:!1,configurable:!0}),Object.defineProperty(e,"resetViewObservers",{get:function(){return C},enumerable:!1,configurable:!0}),e}();function V(){w(N)}t.Parameters=I;var U=1,L=.05,x=6;Page.Canvas.Observers.mouseWheel.push((function(e,t){var n=c(U*(1+.2*e),L,x);n!==U&&(U=n,B(),V())}));var G=Page.Range.getValue(v);Page.Range.addObserver(v,(function(e){G=e,D()}));var k,z=Page.Range.getValue(O);function H(e){k=e,V()}Page.Range.addObserver(O,(function(e){z=e,D(),V()})),H(Page.Tabs.getValues(y)[0]),Page.Tabs.addObserver(y,(function(e){return H(e[0])}));var Y=Page.Checkbox.isChecked(m);Page.Checkbox.addObserver(m,(function(e){Y=e,V()}));var X=-1;function q(){X>=0&&(X=-1,Page.Picker.setValue(f,null))}function W(e){if(e>=0){X=e;var t=s.getPreset(e);I.poles=t.poles,I.distance=t.distance,I.rotation=t.rotation,I.restriction=t.restriction,I.scale=t.scale,I.intensity=t.intensity,V(),w(C)}}Page.Picker.addObserver(f,(function(e){null===e?X=-1:W(+e)})),W(+Page.Picker.getValue(f));var K=-1;function J(){K>=0&&(K=-1,Page.Picker.setValue(d,null))}function Q(e){if(e>=0){K=e;var t=u.getPreset(e);I.poles=t.poles,I.distanceFrom=t.distanceFrom,I.distanceTo=t.distanceTo,I.rotation=t.rotation,I.restriction=t.restriction,I.scale=t.scale,I.intensity=t.intensity,V(),w(C)}}Page.Picker.addObserver(d,(function(e){null===e?K=-1:Q(+e)})),Q(+Page.Picker.getValue(d));var Z=Page.Range.getValue(p);Page.Range.addObserver(p,(function(e){Z=e,q(),J(),V(),w(C)}));var $=Page.Range.getValue(h);Page.Range.addObserver(h,(function(e){$=e,q(),V()}));var ee=Page.Range.getValue(_);Page.Range.addObserver(_,(function(e){ee=e,J(),V()}));var te=Page.Range.getValue(g);Page.Range.addObserver(g,(function(e){te=e,J(),V()}));var ne,re=Page.Range.getValue(P);function ie(e){if(e!==ne){var t,n=(ne=e)===A.FIXED;if(n)(t=Page.Picker.getValue(f))&&W(+t);else(t=Page.Picker.getValue(d))&&Q(+t);Page.Controls.setVisibility(f,n),Page.Controls.setVisibility(h,n),Page.Controls.setVisibility(d,!n),Page.Controls.setVisibility(_,!n),Page.Controls.setVisibility(g,!n);for(var r=0,i=j;r<i.length;r++){(0,i[r])(e)}V()}}Page.Range.addObserver(P,(function(e){re=e,q(),J(),V()})),ie(Page.Tabs.getValues(l)[0]),Page.Tabs.addObserver(l,(function(e){return ie(e[0])}));var oe=Page.Picker.getValue(b);Page.Picker.addObserver(b,(function(e){oe=e,q(),J(),V()})),Page.Canvas.Observers.canvasResize.push((function(){B(),V()})),D(),B()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gl=t.initGL=t.adjustSize=void 0,n(2);var r=null;t.gl=r,t.initGL=function(e){function n(e){Page.Demopage.setErrorMessage("webgl-support",e)}var i=Page.Canvas.getCanvas();if(t.gl=r=i.getContext("webgl",e),null==r){if(t.gl=r=i.getContext("experimental-webgl",e),null==r)return n("Your browser or device does not seem to support WebGL."),!1;n("Your browser or device only supports experimental WebGL.\nThe simulation may not run as expected.")}return r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.BLEND),r.clearColor(0,0,0,1),!0},t.adjustSize=function(e){void 0===e&&(e=!1);var t=e?window.devicePixelRatio:1,n=r.canvas,i=Math.floor(n.clientWidth*t),o=Math.floor(n.clientHeight*t);n.width===i&&n.height===o||(n.width=i,n.height=o)}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),l=u(n(5)),f=s(n(10)),d=u(n(13)),p=u(n(14)),h=n(0),_=s(n(6));n(2);var g=function(e){function t(){var t=e.call(this,c.gl)||this,n=new Float32Array(2);return t._pointsVBO=new d.default(c.gl,n,2,c.gl.FLOAT,!1),t._viewCenter=[0,0],Page.Canvas.Observers.mouseDrag.push((function(e,n){var r=Page.Canvas.getSize(),i=r[0]/r[1];t._viewCenter[0]-=2*e*h.Parameters.scale*i,t._viewCenter[1]+=2*n*h.Parameters.scale})),h.Parameters.resetViewObservers.push((function(){t._viewCenter=[0,0]})),t.recomputePolesPositions(h.Parameters.poles),t._shader=null,f.buildShader({fragmentFilename:"points.frag",vertexFilename:"points.vert",injected:{}},(function(e){null!==e&&(t._shader=e)})),t}return i(t,e),t.prototype.freeGLResources=function(){this._pointsVBO&&(this._pointsVBO.freeGLResources(),this._pointsVBO=null),this._shader&&(this._shader.freeGLResources(),this._shader=null)},Object.defineProperty(t.prototype,"isReadyToDraw",{get:function(){return null!=this._shader},enumerable:!1,configurable:!0}),t.prototype.draw=function(e,t,n){if(this.isReadyToDraw){var r=this.computeXPoints(e,t);this._pointsVBO.setData(r.data),this._shader.a.aCoords.VBO=this._pointsVBO,this._shader.use(),this._shader.bindAttributes();for(var i=1/(1+254*n),o=0,a=r.sets;o<a.length;o++){var s=a[o];this._shader.u.uColor.value=[s.color[0]*i,s.color[1]*i,s.color[2]*i,1],this._shader.bindUniforms(),c.gl.drawArrays(c.gl.POINTS,s.from,s.size)}}},t.prototype.recomputePolesPositions=function(e){for(var t,n=this,r=Page.Canvas.getSize(),i=r[0]/r[1],o=new Float32Array(2*e),a=-2*Math.PI/e,s=Math.PI/2+(e+1)%2*a/2,u=.5*(Math.sin(s)+Math.sin(s+Math.floor(e/2)*a)),c=0;c<e;++c){var l=s+c*a,f=[Math.cos(l),Math.sin(l)-u],d=[((t=f)[0]-n._viewCenter[0])/(h.Parameters.scale*i),(t[1]-n._viewCenter[1])/h.Parameters.scale];o[2*c+0]=d[0],o[2*c+1]=d[1]}return o},t.prototype.computeXPoints=function(e,t){var n=h.Parameters.poles;_.clearHistory();var r=_.getChooseFunction(),i=this.recomputePolesPositions(n),o=[2*Math.random()-1,2*Math.random()-1];var a,s=Page.Canvas.getAspectRatio(),u=.125*h.Parameters.rotation*Math.PI,c=Math.cos(u)/s,l=-Math.sin(u)/s,f=Math.sin(u),d=Math.cos(u);a=0!==h.Parameters.rotation?function(){var e=r(n),a=t*(i[2*e+0]-o[0])*s,u=t*(i[2*e+1]-o[1]);return o[0]+=a*c+u*l,o[1]+=a*f+u*d,e}:function(){var e=r(n);return o[0]+=t*(i[2*e+0]-o[0]),o[1]+=t*(i[2*e+1]-o[1]),e};for(var g=0;g<500;++g)a();var P={data:new Float32Array(2*e),sets:[]};if(h.Parameters.colors){var b=Math.floor(e/n);for(g=0;g<n;++g)P.sets.push({color:p.default(g/n),from:g*b,size:0});for(var v=0;v<e;++v){var O=a();if(P.sets[O].size+1<b){var y=2*(P.sets[O].from+P.sets[O].size);P.data[y+0]=o[0],P.data[y+1]=o[1],P.sets[O].size++}}}else{P.sets.push({color:[1,1,1],from:0,size:e});for(v=0;v<e;++v){a();var m=2*v;P.data[m+0]=o[0],P.data[m+1]=o[1]}}return P},t.MAX_POINTS_PER_STEP=Math.pow(2,18),t}(l.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._gl=e}return e.prototype.gl=function(){return this._gl},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Restriction=t.getChooseFunction=t.clearHistory=void 0;var r,i=n(0);!function(e){e.NONE="none",e.NO_REPEAT="no-repeat",e.NO_DOUBLE_REPEAT="no-double-repeat",e.NO_NEIGHBOUR="no-neighbour",e.NO_NEIGHBOUR_AFTER_REPEAT="no-neighbour-after-repeat",e.NO_RIGHT_NEIGHBOUR="no-right-neighbour"}(r||(r={})),t.Restriction=r,t.getChooseFunction=function(){switch(i.Parameters.restriction){case r.NONE:return u;case r.NO_REPEAT:return c;case r.NO_DOUBLE_REPEAT:return l;case r.NO_NEIGHBOUR:return f;case r.NO_NEIGHBOUR_AFTER_REPEAT:return d;case r.NO_RIGHT_NEIGHBOUR:return p;default:return null}};var o=-1,a=[-1,-1],s=0;function u(e){return Math.floor(e*Math.random())}function c(e){var t;do{t=u(e)}while(t===o);return o=t,t}function l(e){var t,n=a[0]===a[1];do{t=u(e)}while(n&&a[0]===t);return a[s=(s+1)%2]=t,t}function f(e){var t;do{t=u(e)}while((t+1)%e===o||(t+e-1)%e===o);return o=t,t}function d(e){var t,n=a[0]===a[1];do{t=u(e)}while(n&&((t+1)%e===a[0]||(t+e-1)%e===a[0]));return a[s=(s+1)%2]=t,t}function p(e){var t;do{t=u(e)}while((t+1)%e===o);return o=t,t}t.clearHistory=function(){o=-1,a=[-1,-1],s=0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.left=e,this.lower=t,this.width=n,this.height=r}return e.setFullCanvas=function(e){e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)},e.prototype.set=function(e){e.viewport(this.lower,this.left,this.width,this.height)},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preview=t.movement=t.fixed=t.Base=void 0;var i=r(n(3));t.Base=i.default;var o=r(n(18)),a=r(n(19)),s=r(n(20)),u=new o.default;t.fixed=u;var c=new a.default;t.movement=c;var l=new s.default;t.preview=l},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1)),u=n(1),c=a(n(7)),l=a(n(4)),f=a(n(17)),d=n(0),p=o(n(8));n(2),function(){!function(){if(!s.initGL({alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!0}))return;u.gl.enable(u.gl.BLEND),u.gl.blendFunc(u.gl.ONE,u.gl.ONE)}(),Page.Canvas.showLoader(!0),d.Parameters.quality=.6,d.Parameters.colors=!1,d.Parameters.presetFixed=15,d.Parameters.presetMovement=0;var e=!0,t=!1;d.Parameters.clearObservers.push((function(){return e=!0})),d.Parameters.downloadObservers.push((function(n){t=!0,f.default(i,n),t=!1,e=!0}));var n,r,i=new l.default;function o(e){n=e,Page.Canvas.setIndicatorText("points-drawn",n.toLocaleString())}o(0);var a=!0;requestAnimationFrame((function n(){t||(e&&(s.adjustSize(),c.default.setFullCanvas(u.gl),d.Parameters.theme===d.Theme.LIGHT?(u.gl.clearColor(1,1,1,1),u.gl.blendEquation(u.gl.FUNC_REVERSE_SUBTRACT)):(u.gl.clearColor(0,0,0,1),u.gl.blendEquation(u.gl.FUNC_ADD)),u.gl.clear(u.gl.COLOR_BUFFER_BIT),o(0),e=!1,(r=d.Parameters.mode===d.Mode.FIXED?p.fixed:p.movement).reset()),Page.Canvas.isMouseDown()?(p.preview.drawStep(i),o(p.preview.totalPointsDrawn),e=!0):i.isReadyToDraw&&(r.needsToKeepDrawing&&(r.drawStep(i),o(r.totalPointsDrawn)),a&&(a=!1,Page.Canvas.showLoader(!1)))),requestAnimationFrame(n)}))}()},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteShader=t.registerShader=t.getShader=t.buildShader=void 0;var s=n(1),u=a(n(11)),c=o(n(12)),l={};function f(e,t){var n=2,r=0;function i(i){function o(t){return t.replace(/#INJECT\((.*)\)/gm,(function(t,n){return e.injected[n]?e.injected[n]:t}))}if(n--,i||r++,0===n){var a=null;if(0===r){var l=c.getSource(e.vertexFilename),f=c.getSource(e.fragmentFilename),d=o(l),p=o(f);a=new u.default(s.gl,d,p)}t(a)}}c.loadSource(e.vertexFilename,i),c.loadSource(e.fragmentFilename,i)}t.getShader=function(e){return l[e].shader},t.buildShader=f,t.registerShader=function(e,t,n){function r(e){for(var t=0,n=e.callbacks;t<n.length;t++){(0,n[t])(!e.failed,e.shader)}e.callbacks=[]}if(void 0===l[e]){l[e]={callbacks:[n],failed:!1,infos:t,pending:!0,shader:null};var i=l[e];f(t,(function(e){i.pending=!1,i.failed=null===e,i.shader=e,r(i)}))}else{var o=l[e];!0===o.pending?o.callbacks.push(n):r(o)}},t.deleteShader=function(e){l[e]&&(l[e].shader&&l[e].shader.freeGLResources(),delete l[e])}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(5));function s(e,t,n){alert("NOT IMPLEMENTED YET")}var u={35664:{str:"FLOAT_VEC2",binder:function(e,t,n){e.uniform2fv(t,n)}},35665:{str:"FLOAT_VEC3",binder:function(e,t,n){e.uniform3fv(t,n)}},35666:{str:"FLOAT_VEC4",binder:function(e,t,n){e.uniform4fv(t,n)}},35667:{str:"INT_VEC2",binder:function(e,t,n){e.uniform2iv(t,n)}},35668:{str:"INT_VEC3",binder:function(e,t,n){e.uniform3iv(t,n)}},35669:{str:"INT_VEC4",binder:function(e,t,n){e.uniform4iv(t,n)}},35670:{str:"BOOL",binder:function(e,t,n){e.uniform1i(t,+n)}},35671:{str:"BOOL_VEC2",binder:function(e,t,n){e.uniform2iv(t,n)}},35672:{str:"BOOL_VEC3",binder:function(e,t,n){e.uniform3iv(t,n)}},35673:{str:"BOOL_VEC4",binder:function(e,t,n){e.uniform4iv(t,n)}},35674:{str:"FLOAT_MAT2",binder:function(e,t,n){e.uniformMatrix2fv(t,!1,n)}},35675:{str:"FLOAT_MAT3",binder:function(e,t,n){e.uniformMatrix3fv(t,!1,n)}},35676:{str:"FLOAT_MAT4",binder:function(e,t,n){e.uniformMatrix4fv(t,!1,n)}},35678:{str:"SAMPLER_2D",binder:function(e,t,n,r){e.uniform1i(t,n),e.activeTexture(e["TEXTURE"+n]),e.bindTexture(e.TEXTURE_2D,r)}},35680:{str:"SAMPLER_CUBE",binder:function(e,t,n,r){e.uniform1i(t,n),e.activeTexture(e["TEXTURE"+n]),e.bindTexture(e.TEXTURE_CUBE_MAP,r)}},5120:{str:"BYTE",binder:s},5121:{str:"UNSIGNED_BYTE",binder:s},5122:{str:"SHORT",binder:s},5123:{str:"UNSIGNED_SHORT",binder:s},5124:{str:"INT",binder:function(e,t,n){Array.isArray(n),e.uniform1iv(t,n)}},5125:{str:"UNSIGNED_INT",binder:s},5126:{str:"FLOAT",binder:function(e,t,n){Array.isArray(n)?e.uniform1fv(t,n):e.uniform1f(t,n)}}},c=function(e){function t(t,n,r){var i=this;function o(e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error(t.getShaderInfoLog(r)),t.deleteShader(r),null)}(i=e.call(this,t)||this).id=null,i.uCount=0,i.aCount=0;var a=o(t.VERTEX_SHADER,n),s=o(t.FRAGMENT_SHADER,r),u=t.createProgram();return t.attachShader(u,a),t.attachShader(u,s),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)?(i.id=u,i.introspection()):(console.error(t.getProgramInfoLog(u)),t.deleteProgram(u)),i}return i(t,e),t.prototype.freeGLResources=function(){e.prototype.gl.call(this).deleteProgram(this.id),this.id=null},t.prototype.use=function(){e.prototype.gl.call(this).useProgram(this.id)},t.prototype.bindUniforms=function(){var t=this,n=e.prototype.gl.call(this),r=0;Object.keys(this.u).forEach((function(e){var i=t.u[e];if(null!==i.value)if(35678===i.type||35680===i.type){var o=r;u[i.type].binder(n,i.loc,o,i.value),r++}else u[i.type].binder(n,i.loc,i.value)}))},t.prototype.bindAttributes=function(){var e=this;Object.keys(this.a).forEach((function(t){var n=e.a[t];null!==n.VBO&&n.VBO.bind(n.loc)}))},t.prototype.bindUniformsAndAttributes=function(){this.bindUniforms(),this.bindAttributes()},t.prototype.introspection=function(){var t=e.prototype.gl.call(this);this.uCount=t.getProgramParameter(this.id,t.ACTIVE_UNIFORMS),this.u=[];for(var n=0;n<this.uCount;++n){var r=t.getActiveUniform(this.id,n),i=r.name;this.u[i]={loc:t.getUniformLocation(this.id,i),size:r.size,type:r.type,value:null}}this.aCount=t.getProgramParameter(this.id,t.ACTIVE_ATTRIBUTES),this.a=[];for(n=0;n<this.aCount;++n){var o=t.getActiveAttrib(this.id,n),a=o.name;this.a[a]={VBO:null,loc:t.getAttribLocation(this.id,a),size:o.size,type:o.type}}},t}(a.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadSource=t.getSource=void 0;var r={};t.loadSource=function(e,t){function n(e){for(var t=0,n=e.callbacks;t<n.length;t++){(0,n[t])(!e.failed)}e.callbacks=[]}if(void 0===r[e]){r[e]={callbacks:[t],failed:!1,pending:!0,text:null};var i=r[e],o=new XMLHttpRequest;o.open("GET","./shaders/"+e,!0),o.onload=function(){4===o.readyState&&(i.pending=!1,200===o.status?(i.text=o.responseText,i.failed=!1):(console.error("Cannot load '"+e+"' shader source: "+o.statusText),i.failed=!0),n(i))},o.onerror=function(){console.error("Cannot load '"+e+"' shader source: "+o.statusText),i.pending=!1,i.failed=!0,n(i)},o.send(null)}else{var a=r[e];!0===a.pending?a.callbacks.push(t):(a.callbacks=[t],n(a))}},t.getSource=function(e){return r[e].text}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=o(n(5));!function(e){e[e.DYNAMIC=0]="DYNAMIC",e[e.STATIC=1]="STATIC"}(a||(a={}));var u=function(e){function t(t,n,r,i,o){void 0===o&&(o=!0);var s=e.call(this,t)||this;return s.id=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s.id),o?t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW):t.bufferData(t.ARRAY_BUFFER,n,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),s.size=r,s.type=i,s.normalize=!1,s.stride=0,s.offset=0,s.usage=o?a.STATIC:a.DYNAMIC,s}return i(t,e),t.createQuad=function(e,n,r,i,o){return new t(e,new Float32Array([n,r,i,r,n,o,i,o]),2,e.FLOAT,!0)},t.prototype.freeGLResources=function(){this.gl().deleteBuffer(this.id),this.id=null},t.prototype.bind=function(t){var n=e.prototype.gl.call(this);n.enableVertexAttribArray(t),n.bindBuffer(n.ARRAY_BUFFER,this.id),n.vertexAttribPointer(t,this.size,this.type,this.normalize,this.stride,this.offset)},t.prototype.setData=function(t){var n=e.prototype.gl.call(this);n.bindBuffer(n.ARRAY_BUFFER,this.id),this.usage===a.STATIC?n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW):n.bufferData(n.ARRAY_BUFFER,t,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null)},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0,n=0,r=0;return(e=e%1*6)<1?(t=1,n=e):e<2?(t=2-e,n=1):e<3?(n=1,r=e-2):e<4?(n=4-e,r=1):e<5?(t=e-4,r=1):e<6&&(t=1,r=6-e),[t,n,r]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreset=void 0;var r=n(6),i=[];i[0]={poles:3,distance:.5,rotation:0,restriction:r.Restriction.NONE,scale:1,intensity:.01},i[1]={poles:6,distance:.5,rotation:0,restriction:r.Restriction.NONE,scale:.75,intensity:.03},i[2]={poles:3,distance:1.5,rotation:0,restriction:r.Restriction.NONE,scale:3,intensity:.08},i[3]={poles:5,distance:.5,rotation:0,restriction:r.Restriction.NONE,scale:1,intensity:.03},i[4]={poles:4,distance:.5,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:.8,intensity:.01},i[5]={poles:4,distance:.5,rotation:0,restriction:r.Restriction.NO_NEIGHBOUR_AFTER_REPEAT,scale:.8,intensity:.02},i[6]={poles:4,distance:1.5,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:2.5,intensity:.07},i[7]={poles:6,distance:.57,rotation:0,restriction:r.Restriction.NONE,scale:1.2,intensity:.03},i[8]={poles:6,distance:1.5,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:2,intensity:.2},i[9]={poles:4,distance:.4,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:.8,intensity:.01},i[10]={poles:4,distance:1.618,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:3,intensity:.4},i[11]={poles:5,distance:1.618,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:4,intensity:.3},i[12]={poles:3,distance:1.618,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:4,intensity:.15},i[13]={poles:4,distance:1.618,rotation:0,restriction:r.Restriction.NONE,scale:4,intensity:.4},i[14]={poles:6,distance:.667,rotation:0,restriction:r.Restriction.NONE,scale:.65,intensity:.02},i[15]={poles:5,distance:1.5,rotation:0,restriction:r.Restriction.NO_NEIGHBOUR_AFTER_REPEAT,scale:3,intensity:.16},i[16]={poles:5,distance:1.5,rotation:0,restriction:r.Restriction.NO_NEIGHBOUR,scale:3,intensity:.07},i[17]={poles:7,distance:1.445,rotation:0,restriction:r.Restriction.NO_DOUBLE_REPEAT,scale:1.5,intensity:.2},i[18]={poles:4,distance:.5,rotation:0,restriction:r.Restriction.NO_DOUBLE_REPEAT,scale:.75,intensity:.03},i[19]={poles:3,distance:.386,rotation:0,restriction:r.Restriction.NO_RIGHT_NEIGHBOUR,scale:1,intensity:.03},i[20]={poles:3,distance:1.755,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:4,intensity:1},i[21]={poles:3,distance:1.647,rotation:0,restriction:r.Restriction.NO_RIGHT_NEIGHBOUR,scale:1,intensity:.05},t.getPreset=function(e){return i[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreset=void 0;var r=n(6),i=[];i[0]={poles:3,distanceFrom:1,distanceTo:1.6,rotation:0,restriction:r.Restriction.NONE,scale:3,intensity:.1},i[1]={poles:5,distanceFrom:.5,distanceTo:1,rotation:0,restriction:r.Restriction.NONE,scale:1,intensity:.1},i[2]={poles:6,distanceFrom:1,distanceTo:1.5,rotation:0,restriction:r.Restriction.NO_REPEAT,scale:2.5,intensity:.1},i[3]={poles:3,distanceFrom:1,distanceTo:1.7,rotation:0,restriction:r.Restriction.NO_RIGHT_NEIGHBOUR,scale:3,intensity:.175},i[4]={poles:5,distanceFrom:.265,distanceTo:1.65,rotation:0,restriction:r.Restriction.NO_NEIGHBOUR,scale:3,intensity:.25},t.getPreset=function(e){return i[e]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(1)),u=n(1),c=a(n(7)),l=o(n(8)),f=n(0);n(2),t.default=function(e,t){var n=Page.Canvas.getCanvas(),r=f.Parameters.mode===f.Mode.FIXED?l.fixed:l.movement,i=r.computeTotalPointsNeeded([t,t]);if(i>5e7){var o="Rendering your image might take a while because it requires to draw "+i.toLocaleString()+" points. Do you want to proceed?";if(!confirm(o))return}function a(){for(var e=Page.Canvas.getSize(),t=0,n=Page.Canvas.Observers.canvasResize;t<n.length;t++){(0,n[t])(e[0],e[1])}}function d(){n.style.position="",n.style.width="",n.style.height="",Page.Canvas.showLoader(!1),Page.Canvas.setLoaderText(""),a()}for(Page.Canvas.showLoader(!0),n.style.position="absolute",n.style.width=t+"px",n.style.height=t+"px",n.width=t,n.height=t,a(),s.adjustSize(),c.default.setFullCanvas(u.gl),u.gl.clear(u.gl.COLOR_BUFFER_BIT),r.reset();r.needsToKeepDrawing;)r.drawStep(e);if(n.msToBlob){var p=n.msToBlob();window.navigator.msSaveBlob(p,"chaos-game.png"),d()}else n.toBlob((function(e){var t=document.createElement("a");t.download="chaos-game.png",t.href=URL.createObjectURL(e),t.click(),d()}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(4)),s=n(0),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.reset=function(){this._totalPointsDrawn=0},t.prototype.drawStep=function(e){var t=this.nbPointsNeeded-this._totalPointsDrawn,n=Math.min(a.default.MAX_POINTS_PER_STEP,t);e.draw(n,s.Parameters.distance,s.Parameters.quality),this._totalPointsDrawn+=n},Object.defineProperty(t.prototype,"needsToKeepDrawing",{get:function(){return this._totalPointsDrawn<this.nbPointsNeeded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalPointsDrawn",{get:function(){return this._totalPointsDrawn},enumerable:!1,configurable:!0}),t.prototype.computeTotalPointsNeeded=function(e){var n=s.Parameters.computeSizeFactor(e);return t.computeTotalPointsNeededInternal(n)},t.computeTotalPointsNeededInternal=function(e){var t=2e3*s.Parameters.nbPointsNeeded*e*e;return Math.ceil(t)},Object.defineProperty(t.prototype,"nbPointsNeeded",{get:function(){var e=s.Parameters.sizeFactor;return t.computeTotalPointsNeededInternal(e)},enumerable:!1,configurable:!0}),t}(o(n(3)).default);t.default=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(4)),s=n(0),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.reset=function(){this._totalPointsDrawn=0,this._distance=s.Parameters.distanceFrom,this._pointsNeededPerDistanceUnit=t.computePointsPerDistanceUnit(s.Parameters.sizeFactor),this._distanceGap=.4/s.Parameters.sizeFactor;var e=(s.Parameters.distanceTo-s.Parameters.distanceFrom)/180,n=e*this._pointsNeededPerDistanceUnit;this._distancePerStep=e,n>a.default.MAX_POINTS_PER_STEP&&(this._distancePerStep*=a.default.MAX_POINTS_PER_STEP/n)},t.prototype.drawStep=function(e){for(var t=Math.min(this._distance+this._distancePerStep,s.Parameters.distanceTo);this._distance+this._distanceGap<t;)this.drawDistanceGap(e,this._distanceGap);this._distance<t&&this.drawDistanceGap(e,t-this._distance)},Object.defineProperty(t.prototype,"needsToKeepDrawing",{get:function(){return this._distance<s.Parameters.distanceTo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalPointsDrawn",{get:function(){return this._totalPointsDrawn},enumerable:!1,configurable:!0}),t.prototype.computeTotalPointsNeeded=function(e){var n=s.Parameters.computeSizeFactor(e),r=t.computePointsPerDistanceUnit(n),i=s.Parameters.distanceTo-s.Parameters.distanceFrom;return Math.ceil(r*i)},t.computePointsPerDistanceUnit=function(e){return Math.ceil(2e3*s.Parameters.nbPointsNeeded*e*e)},t.prototype.drawDistanceGap=function(e,t){var n=Math.ceil(t*this._pointsNeededPerDistanceUnit);e.draw(n,this._distance,s.Parameters.quality),this._totalPointsDrawn+=n,this._distance+=t},t}(o(n(3)).default);t.default=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=o(n(3)),u=Math.pow(2,17),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.reset=function(){},t.prototype.drawStep=function(e){e.draw(u,a.Parameters.distance,0)},Object.defineProperty(t.prototype,"needsToKeepDrawing",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalPointsDrawn",{get:function(){return u},enumerable:!1,configurable:!0}),t.prototype.computeTotalPointsNeeded=function(e){return u},t}(s.default);t.default=c}]);
//# sourceMappingURL=main.min.js.map